<div class="w-full max-w-[1200px] h-full">
  <div class="m-5 overflow-hidden h-full">
    @if(_serviceCarrito.carritoPlantasS().length>0){
    <h1 class="dark:text-gray-100 text-3xl font-bold text-black pb-5">
      Carrito
    </h1>
    <table class="w-full text-center text-gray-500 dark:text-gray-400">
      <thead
        class="text-gray-700 dark:text-gray-100 border border-neutral-800 bg-neutral-800 text-lg"
      >
        <tr>
          <th scope="col" colspan="2" class="px-6 py-3 font-medium text-left">
            Producto
          </th>
          <th scope="col" class="px-6 py-3 font-medium">Precio</th>
          <th scope="col" class="px-6 py-3 font-medium">Cantidad</th>
          <th scope="col" class="px-6 py-3 font-medium">Total</th>
        </tr>
      </thead>

      <tbody class="bg-neutral-850 border-[1px] border-neutral-800">
        @for(datosCarrito of _serviceCarrito.carritoPlantasS(); track
        datosCarrito.id) {
        <tr class="border-b-[1px] border-neutral-800">
          <td class="px-6 py-3 max-w-[100px] overflow-hidden">
            <img
              [src]="datosCarrito.imagenUrl"
              class="aspect-4/5 p-1 rounded-lg object-cover"
            />
          </td>
          <td
            scope="row"
            class="px-6 py-3 dar:text-gray-200 whitespace-nowrap dark:text-white text-left"
          >
            {{ datosCarrito.productoNombre }}
          </td>

          <td class="px-6 py-3 dark:text-gray-200">
            S/. {{ datosCarrito.precio | number : "1.2-2" }}
          </td>

          <td class="px-6 py-3 dark:text-gray-200">
            <div class="flex items-center justify-center gap-5">
              <!-- Botón de menos -->
              <div>
                <button
                  type="button"
                  class="cursor-pointer px-4 py-2 text-white font-bold shadow-md hover:bg-gray-50 dark:bg-[#1A2B2B] dark:hover:bg-[#131d1d] focus:outline-none border border-neutral-800"
                  (click)="decrementar(datosCarrito.id)"
                >
                  −
                </button>

                <!-- Input de número -->
                <input
                  type="number"
                  min="0"
                  (keydown)="evitarCaracteres(datosCarrito.id, $event)"
                  [value]="getCantidad(datosCarrito.id)"
                  (input)="setCantidad(datosCarrito.id, $event)"
                  class="appearance-none [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none w-15 py-2 text-center bg-gray-100 text-black font-semibold shadow-md focus:outline-none border border-neutral-800"
                />

                <!-- Botón de más -->
                <button
                  type="button"
                  (click)="incrementar(datosCarrito.id)"
                  class="cursor-pointer px-4 py-2 text-white font-bold shadow-md focus:outline-none hover:bg-gray-50 dark:bg-[#1A2B2B] dark:hover:bg-[#131d1d] border border-neutral-800"
                >
                  +
                </button>
              </div>
              <div
                class="cursor-pointer"
                (click)="eliminarPlanta(datosCarrito.id)"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="1em"
                  height="1em"
                  viewBox="0 0 26 26"
                >
                  <path
                    fill="currentColor"
                    d="M11.5-.031c-1.958 0-3.531 1.627-3.531 3.594V4H4c-.551 0-1 .449-1 1v1H2v2h2v15c0 1.645 1.355 3 3 3h12c1.645 0 3-1.355 3-3V8h2V6h-1V5c0-.551-.449-1-1-1h-3.969v-.438c0-1.966-1.573-3.593-3.531-3.593zm0 2.062h3c.804 0 1.469.656 1.469 1.531V4H10.03v-.438c0-.875.665-1.53 1.469-1.53zM6 8h5.125c.124.013.247.031.375.031h3c.128 0 .25-.018.375-.031H20v15c0 .563-.437 1-1 1H7c-.563 0-1-.437-1-1zm2 2v12h2V10zm4 0v12h2V10zm4 0v12h2V10z"
                  />
                </svg>
              </div>
            </div>
          </td>

          <td class="px-6 py-3 dark:text-gray-200">
            S/.
            {{
              datosCarrito.precio * getCantidad(datosCarrito.id)
                | number : "1.2-2"
            }}
          </td>
        </tr>

        }@empty {
        <p class="p-5">Aun no tiene productos en el carrito</p>
        }
      </tbody>
    </table>

    <div
      class="w-full grid grid-cols-5 grid-rows-2 text-green-100 text-lg font-medium"
    >
      <div class="col-start-4 text-center">
        <h4 class="pl-5 py-10">SubTotal:</h4>
      </div>

      <div class="col-start-5 text-center">
        <p class="pl-5 py-10">
          S/. {{ _serviceCarrito.totalCarrito() | number : "1.2-2" }}
        </p>
      </div>

      <div class="col-start-5 row-start-2 text-center pl-6">
        <button
          class="py-2 cursor-pointer shadow-md bg-[#C1DCDC] dark:bg-[#1A2B2B] text-black dark:text-gray-100 w-fit hover:bg-[#b3cece] dark:hover:bg-[#192222] px-5 text-nowrap"
        >
          FINALIZAR COMPRA
        </button>
      </div>
    </div>
    } @else{
    <div class="flex items-center justify-center h-full text-center deslizamiento-carrito">
     <div class="flex items-center  flex-col gap-7 w-3xl my-20">
      
      <div class="flex justify-center">
        <svg
          class="text-center"
          
          xmlns="http://www.w3.org/2000/svg"
          width="9em"
          height="9em"
          viewBox="0 0 24 24"
        >
          <g fill="none" stroke="currentColor" strokeWidth="1.5">
            <path
              d="M7.5 18a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Zm9 0a1.5 1.5 0 1 1 0 3a1.5 1.5 0 0 1 0-3Z"
            />
            <path
              strokeLinecap="round"
              d="m11.5 12.5l3-3m0 3l-3-3M2 3l.261.092c1.302.457 1.953.686 2.325 1.231s.372 1.268.372 2.715V9.76c0 2.942.063 3.912.93 4.826c.866.914 2.26.914 5.05.914H12m4.24 0c1.561 0 2.342 0 2.894-.45c.551-.45.709-1.214 1.024-2.743l.5-2.424c.347-1.74.52-2.609.076-3.186c-.443-.577-1.96-.577-3.645-.577h-6.065m-6.066 0H7"
            />
          </g>
        </svg>
      </div>
       <h1 class="text-3xl font-medium">Tu carro está vacio</h1>
      <p>Antes de finalizar la compra, debes añadir algunos productos a tu carrito. Encontrarás muchos productos interesantes en nuestra página.</p>
      <div>
        <app-boton-redirigir
          clasesExtras="bg-[#C1DCDC] dark:bg-[#1A2B2B] dark:border dark:border-gray-100 text-black dark:text-gray-100 w-fit hover:bg-[#b3cece] dark:hover:bg-[#192222] rounded-3xl px-5  "
          texto="Ver Plantas"
          ruta="/plantas"
        ></app-boton-redirigir>
      </div>
     </div>
    </div>
    }
  </div>
</div>
